#!/bin/sh
if [ "$init_system_are" = "systemd" ];then
	service_manager(){
		_command="${1-}"
		_file="${2-}"
		if [ "${_command}" = "stop" ];then
			systemctl stop ${_file} || show_wm_only "failed to stop ${_file}"
		elif [ "${_command}" = "enable-only" ];then
			systemctl enable ${_file} || show_wm "failed to enable ${_file}"
		elif [ "${_command}" = "enable" ];then
			systemctl enable --now ${_file} || show_wm "failed to start and enable ${_file}"
		elif [ "${_command}" = "disable" ];then
			systemctl disable ${_file} || show_wm_only "failed to disable ${_file}"
		elif [ "${_command}" = "disable-stop" ];then
			systemctl disable ${_file} || show_wm_only "failed to disable ${_file}"
			systemctl stop ${_file} || show_wm_only "failed to stop ${_file}"
		elif [ "${_command}" = "is-enabled" ];then
			if systemctl is-enabled --quiet ${_file};then
				return
			else
				show_wm_only "${_file} are disabled."
			fi
		elif [ "${_command}" = "mask" ];then
			systemctl mask ${_file} || show_wm "failed to mask ${_file}"
		fi
	}
elif [ "$init_system_are" = "openrc" ];then
	service_manager(){
		_command="${1-}"
		_file="${2-}"
		if [ "${_command}" = "stop" ];then
			rc-service ${_file} stop || show_wm_only "failed to stop ${_file}"
		elif [ "${_command}" = "enable-only" ];then
			rc-update add ${_file} || show_wm "failed to enable ${_file}"
		elif [ "${_command}" = "enable" ];then
			rc-update add ${_file} || show_wm "failed to enable and start ${_file}"
		elif [ "${_command}" = "disable" ];then
			rc-update del ${_file} || show_wm_only "failed to disable ${_file}"
		elif [ "${_command}" = "disable-stop" ];then
			rc-update del ${_file} || show_wm_only "failed to disable ${_file}"
			rc-service ${_file} stop || show_wm_only "failed to stop ${_file}"
		elif [ "${_command}" = "is-enabled" ];then
			rc-service ${_file} status --quiet || show_wm "failed to show status of ${_file}"
		elif [ "${_command}" = "mask" ];then
			rc-update del ${_file} || show_wm "failed to mask ${_file}"
		fi
	}
else
	show_em "init_system_are = $init_system_are . $init_system_are does not exist."
fi
